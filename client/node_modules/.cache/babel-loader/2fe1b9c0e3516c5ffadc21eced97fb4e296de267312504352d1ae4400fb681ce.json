{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { Frequency } from './types';\nimport { pymod, divmod, empty, includes } from './helpers';\nimport { dateutil } from './dateutil';\nvar Time = /** @class */function () {\n  function Time(hour, minute, second, millisecond) {\n    this.hour = hour;\n    this.minute = minute;\n    this.second = second;\n    this.millisecond = millisecond || 0;\n  }\n  Time.prototype.getHours = function () {\n    return this.hour;\n  };\n  Time.prototype.getMinutes = function () {\n    return this.minute;\n  };\n  Time.prototype.getSeconds = function () {\n    return this.second;\n  };\n  Time.prototype.getMilliseconds = function () {\n    return this.millisecond;\n  };\n  Time.prototype.getTime = function () {\n    return (this.hour * 60 * 60 + this.minute * 60 + this.second) * 1000 + this.millisecond;\n  };\n  return Time;\n}();\nexport { Time };\nvar DateTime = /** @class */function (_super) {\n  __extends(DateTime, _super);\n  function DateTime(year, month, day, hour, minute, second, millisecond) {\n    var _this = _super.call(this, hour, minute, second, millisecond) || this;\n    _this.year = year;\n    _this.month = month;\n    _this.day = day;\n    return _this;\n  }\n  DateTime.fromDate = function (date) {\n    return new this(date.getUTCFullYear(), date.getUTCMonth() + 1, date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds(), date.valueOf() % 1000);\n  };\n  DateTime.prototype.getWeekday = function () {\n    return dateutil.getWeekday(new Date(this.getTime()));\n  };\n  DateTime.prototype.getTime = function () {\n    return new Date(Date.UTC(this.year, this.month - 1, this.day, this.hour, this.minute, this.second, this.millisecond)).getTime();\n  };\n  DateTime.prototype.getDay = function () {\n    return this.day;\n  };\n  DateTime.prototype.getMonth = function () {\n    return this.month;\n  };\n  DateTime.prototype.getYear = function () {\n    return this.year;\n  };\n  DateTime.prototype.addYears = function (years) {\n    this.year += years;\n  };\n  DateTime.prototype.addMonths = function (months) {\n    this.month += months;\n    if (this.month > 12) {\n      var yearDiv = Math.floor(this.month / 12);\n      var monthMod = pymod(this.month, 12);\n      this.month = monthMod;\n      this.year += yearDiv;\n      if (this.month === 0) {\n        this.month = 12;\n        --this.year;\n      }\n    }\n  };\n  DateTime.prototype.addWeekly = function (days, wkst) {\n    if (wkst > this.getWeekday()) {\n      this.day += -(this.getWeekday() + 1 + (6 - wkst)) + days * 7;\n    } else {\n      this.day += -(this.getWeekday() - wkst) + days * 7;\n    }\n    this.fixDay();\n  };\n  DateTime.prototype.addDaily = function (days) {\n    this.day += days;\n    this.fixDay();\n  };\n  DateTime.prototype.addHours = function (hours, filtered, byhour) {\n    if (filtered) {\n      // Jump to one iteration before next day\n      this.hour += Math.floor((23 - this.hour) / hours) * hours;\n    }\n    for (;;) {\n      this.hour += hours;\n      var _a = divmod(this.hour, 24),\n        dayDiv = _a.div,\n        hourMod = _a.mod;\n      if (dayDiv) {\n        this.hour = hourMod;\n        this.addDaily(dayDiv);\n      }\n      if (empty(byhour) || includes(byhour, this.hour)) break;\n    }\n  };\n  DateTime.prototype.addMinutes = function (minutes, filtered, byhour, byminute) {\n    if (filtered) {\n      // Jump to one iteration before next day\n      this.minute += Math.floor((1439 - (this.hour * 60 + this.minute)) / minutes) * minutes;\n    }\n    for (;;) {\n      this.minute += minutes;\n      var _a = divmod(this.minute, 60),\n        hourDiv = _a.div,\n        minuteMod = _a.mod;\n      if (hourDiv) {\n        this.minute = minuteMod;\n        this.addHours(hourDiv, false, byhour);\n      }\n      if ((empty(byhour) || includes(byhour, this.hour)) && (empty(byminute) || includes(byminute, this.minute))) {\n        break;\n      }\n    }\n  };\n  DateTime.prototype.addSeconds = function (seconds, filtered, byhour, byminute, bysecond) {\n    if (filtered) {\n      // Jump to one iteration before next day\n      this.second += Math.floor((86399 - (this.hour * 3600 + this.minute * 60 + this.second)) / seconds) * seconds;\n    }\n    for (;;) {\n      this.second += seconds;\n      var _a = divmod(this.second, 60),\n        minuteDiv = _a.div,\n        secondMod = _a.mod;\n      if (minuteDiv) {\n        this.second = secondMod;\n        this.addMinutes(minuteDiv, false, byhour, byminute);\n      }\n      if ((empty(byhour) || includes(byhour, this.hour)) && (empty(byminute) || includes(byminute, this.minute)) && (empty(bysecond) || includes(bysecond, this.second))) {\n        break;\n      }\n    }\n  };\n  DateTime.prototype.fixDay = function () {\n    if (this.day <= 28) {\n      return;\n    }\n    var daysinmonth = dateutil.monthRange(this.year, this.month - 1)[1];\n    if (this.day <= daysinmonth) {\n      return;\n    }\n    while (this.day > daysinmonth) {\n      this.day -= daysinmonth;\n      ++this.month;\n      if (this.month === 13) {\n        this.month = 1;\n        ++this.year;\n        if (this.year > dateutil.MAXYEAR) {\n          return;\n        }\n      }\n      daysinmonth = dateutil.monthRange(this.year, this.month - 1)[1];\n    }\n  };\n  DateTime.prototype.add = function (options, filtered) {\n    var freq = options.freq,\n      interval = options.interval,\n      wkst = options.wkst,\n      byhour = options.byhour,\n      byminute = options.byminute,\n      bysecond = options.bysecond;\n    switch (freq) {\n      case Frequency.YEARLY:\n        return this.addYears(interval);\n      case Frequency.MONTHLY:\n        return this.addMonths(interval);\n      case Frequency.WEEKLY:\n        return this.addWeekly(interval, wkst);\n      case Frequency.DAILY:\n        return this.addDaily(interval);\n      case Frequency.HOURLY:\n        return this.addHours(interval, filtered, byhour);\n      case Frequency.MINUTELY:\n        return this.addMinutes(interval, filtered, byhour, byminute);\n      case Frequency.SECONDLY:\n        return this.addSeconds(interval, filtered, byhour, byminute, bysecond);\n    }\n  };\n  return DateTime;\n}(Time);\nexport { DateTime };","map":{"version":3,"names":["Frequency","pymod","divmod","empty","includes","dateutil","Time","hour","minute","second","millisecond","prototype","getHours","getMinutes","getSeconds","getMilliseconds","getTime","DateTime","_super","__extends","year","month","day","_this","call","fromDate","date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","valueOf","getWeekday","Date","UTC","getDay","getMonth","getYear","addYears","years","addMonths","months","yearDiv","Math","floor","monthMod","addWeekly","days","wkst","fixDay","addDaily","addHours","hours","filtered","byhour","_a","dayDiv","div","hourMod","mod","addMinutes","minutes","byminute","hourDiv","minuteMod","addSeconds","seconds","bysecond","minuteDiv","secondMod","daysinmonth","monthRange","MAXYEAR","add","options","freq","interval","YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],"sources":["../../src/datetime.ts"],"sourcesContent":[null],"mappings":";AAAA,SAAwBA,SAAS,QAAQ,SAAS;AAClD,SAASC,KAAK,EAAEC,MAAM,EAAEC,KAAK,EAAEC,QAAQ,QAAQ,WAAW;AAC1D,SAASC,QAAQ,QAAQ,YAAY;AAErC,IAAAC,IAAA;EAME,SAAAA,KACEC,IAAY,EACZC,MAAc,EACdC,MAAc,EACdC,WAAmB;IAEnB,IAAI,CAACH,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACC,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,WAAW,GAAGA,WAAW,IAAI,CAAC;EACrC;EAEAJ,IAAA,CAAAK,SAAA,CAAAC,QAAQ,GAAR;IACE,OAAO,IAAI,CAACL,IAAI;EAClB,CAAC;EAEDD,IAAA,CAAAK,SAAA,CAAAE,UAAU,GAAV;IACE,OAAO,IAAI,CAACL,MAAM;EACpB,CAAC;EAEDF,IAAA,CAAAK,SAAA,CAAAG,UAAU,GAAV;IACE,OAAO,IAAI,CAACL,MAAM;EACpB,CAAC;EAEDH,IAAA,CAAAK,SAAA,CAAAI,eAAe,GAAf;IACE,OAAO,IAAI,CAACL,WAAW;EACzB,CAAC;EAEDJ,IAAA,CAAAK,SAAA,CAAAK,OAAO,GAAP;IACE,OACE,CAAC,IAAI,CAACT,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAACC,MAAM,GAAG,EAAE,GAAG,IAAI,CAACC,MAAM,IAAI,IAAI,GAC7D,IAAI,CAACC,WAAW;EAEpB,CAAC;EACH,OAAAJ,IAAC;AAAD,CAAC,EAxCD;;AA0CA,IAAAW,QAAA,0BAAAC,MAAA;EAA8BC,SAAA,CAAAF,QAAA,EAAAC,MAAA;EAiB5B,SAAAD,SACEG,IAAY,EACZC,KAAa,EACbC,GAAW,EACXf,IAAY,EACZC,MAAc,EACdC,MAAc,EACdC,WAAmB;IAPrB,IAAAa,KAAA,GASEL,MAAA,CAAAM,IAAA,OAAMjB,IAAI,EAAEC,MAAM,EAAEC,MAAM,EAAEC,WAAW,CAAC;IACxCa,KAAI,CAACH,IAAI,GAAGA,IAAI;IAChBG,KAAI,CAACF,KAAK,GAAGA,KAAK;IAClBE,KAAI,CAACD,GAAG,GAAGA,GAAG;;EAChB;EAzBOL,QAAA,CAAAQ,QAAQ,GAAf,UAAgBC,IAAU;IACxB,OAAO,IAAI,IAAI,CACbA,IAAI,CAACC,cAAc,EAAE,EACrBD,IAAI,CAACE,WAAW,EAAE,GAAG,CAAC,EACtBF,IAAI,CAACG,UAAU,EAAE,EACjBH,IAAI,CAACI,WAAW,EAAE,EAClBJ,IAAI,CAACK,aAAa,EAAE,EACpBL,IAAI,CAACM,aAAa,EAAE,EACpBN,IAAI,CAACO,OAAO,EAAE,GAAG,IAAI,CACtB;EACH,CAAC;EAiBDhB,QAAA,CAAAN,SAAA,CAAAuB,UAAU,GAAV;IACE,OAAO7B,QAAQ,CAAC6B,UAAU,CAAC,IAAIC,IAAI,CAAC,IAAI,CAACnB,OAAO,EAAE,CAAC,CAAC;EACtD,CAAC;EAEDC,QAAA,CAAAN,SAAA,CAAAK,OAAO,GAAP;IACE,OAAO,IAAImB,IAAI,CACbA,IAAI,CAACC,GAAG,CACN,IAAI,CAAChB,IAAI,EACT,IAAI,CAACC,KAAK,GAAG,CAAC,EACd,IAAI,CAACC,GAAG,EACR,IAAI,CAACf,IAAI,EACT,IAAI,CAACC,MAAM,EACX,IAAI,CAACC,MAAM,EACX,IAAI,CAACC,WAAW,CACjB,CACF,CAACM,OAAO,EAAE;EACb,CAAC;EAEDC,QAAA,CAAAN,SAAA,CAAA0B,MAAM,GAAN;IACE,OAAO,IAAI,CAACf,GAAG;EACjB,CAAC;EAEDL,QAAA,CAAAN,SAAA,CAAA2B,QAAQ,GAAR;IACE,OAAO,IAAI,CAACjB,KAAK;EACnB,CAAC;EAEDJ,QAAA,CAAAN,SAAA,CAAA4B,OAAO,GAAP;IACE,OAAO,IAAI,CAACnB,IAAI;EAClB,CAAC;EAEMH,QAAA,CAAAN,SAAA,CAAA6B,QAAQ,GAAf,UAAgBC,KAAa;IAC3B,IAAI,CAACrB,IAAI,IAAIqB,KAAK;EACpB,CAAC;EAEMxB,QAAA,CAAAN,SAAA,CAAA+B,SAAS,GAAhB,UAAiBC,MAAc;IAC7B,IAAI,CAACtB,KAAK,IAAIsB,MAAM;IACpB,IAAI,IAAI,CAACtB,KAAK,GAAG,EAAE,EAAE;MACnB,IAAMuB,OAAO,GAAGC,IAAI,CAACC,KAAK,CAAC,IAAI,CAACzB,KAAK,GAAG,EAAE,CAAC;MAC3C,IAAM0B,QAAQ,GAAG9C,KAAK,CAAC,IAAI,CAACoB,KAAK,EAAE,EAAE,CAAC;MACtC,IAAI,CAACA,KAAK,GAAG0B,QAAQ;MACrB,IAAI,CAAC3B,IAAI,IAAIwB,OAAO;MACpB,IAAI,IAAI,CAACvB,KAAK,KAAK,CAAC,EAAE;QACpB,IAAI,CAACA,KAAK,GAAG,EAAE;QACf,EAAE,IAAI,CAACD,IAAI;;;EAGjB,CAAC;EAEMH,QAAA,CAAAN,SAAA,CAAAqC,SAAS,GAAhB,UAAiBC,IAAY,EAAEC,IAAY;IACzC,IAAIA,IAAI,GAAG,IAAI,CAAChB,UAAU,EAAE,EAAE;MAC5B,IAAI,CAACZ,GAAG,IAAI,EAAE,IAAI,CAACY,UAAU,EAAE,GAAG,CAAC,IAAI,CAAC,GAAGgB,IAAI,CAAC,CAAC,GAAGD,IAAI,GAAG,CAAC;KAC7D,MAAM;MACL,IAAI,CAAC3B,GAAG,IAAI,EAAE,IAAI,CAACY,UAAU,EAAE,GAAGgB,IAAI,CAAC,GAAGD,IAAI,GAAG,CAAC;;IAGpD,IAAI,CAACE,MAAM,EAAE;EACf,CAAC;EAEMlC,QAAA,CAAAN,SAAA,CAAAyC,QAAQ,GAAf,UAAgBH,IAAY;IAC1B,IAAI,CAAC3B,GAAG,IAAI2B,IAAI;IAChB,IAAI,CAACE,MAAM,EAAE;EACf,CAAC;EAEMlC,QAAA,CAAAN,SAAA,CAAA0C,QAAQ,GAAf,UAAgBC,KAAa,EAAEC,QAAiB,EAAEC,MAAgB;IAChE,IAAID,QAAQ,EAAE;MACZ;MACA,IAAI,CAAChD,IAAI,IAAIsC,IAAI,CAACC,KAAK,CAAC,CAAC,EAAE,GAAG,IAAI,CAACvC,IAAI,IAAI+C,KAAK,CAAC,GAAGA,KAAK;;IAG3D,SAAS;MACP,IAAI,CAAC/C,IAAI,IAAI+C,KAAK;MACZ,IAAAG,EAAA,GAAgCvD,MAAM,CAAC,IAAI,CAACK,IAAI,EAAE,EAAE,CAAC;QAA9CmD,MAAM,GAAAD,EAAA,CAAAE,GAAA;QAAOC,OAAO,GAAAH,EAAA,CAAAI,GAA0B;MAC3D,IAAIH,MAAM,EAAE;QACV,IAAI,CAACnD,IAAI,GAAGqD,OAAO;QACnB,IAAI,CAACR,QAAQ,CAACM,MAAM,CAAC;;MAGvB,IAAIvD,KAAK,CAACqD,MAAM,CAAC,IAAIpD,QAAQ,CAACoD,MAAM,EAAE,IAAI,CAACjD,IAAI,CAAC,EAAE;;EAEtD,CAAC;EAEMU,QAAA,CAAAN,SAAA,CAAAmD,UAAU,GAAjB,UACEC,OAAe,EACfR,QAAiB,EACjBC,MAAgB,EAChBQ,QAAkB;IAElB,IAAIT,QAAQ,EAAE;MACZ;MACA,IAAI,CAAC/C,MAAM,IACTqC,IAAI,CAACC,KAAK,CAAC,CAAC,IAAI,IAAI,IAAI,CAACvC,IAAI,GAAG,EAAE,GAAG,IAAI,CAACC,MAAM,CAAC,IAAIuD,OAAO,CAAC,GAAGA,OAAO;;IAG3E,SAAS;MACP,IAAI,CAACvD,MAAM,IAAIuD,OAAO;MAChB,IAAAN,EAAA,GAAmCvD,MAAM,CAAC,IAAI,CAACM,MAAM,EAAE,EAAE,CAAC;QAAnDyD,OAAO,GAAAR,EAAA,CAAAE,GAAA;QAAOO,SAAS,GAAAT,EAAA,CAAAI,GAA4B;MAChE,IAAII,OAAO,EAAE;QACX,IAAI,CAACzD,MAAM,GAAG0D,SAAS;QACvB,IAAI,CAACb,QAAQ,CAACY,OAAO,EAAE,KAAK,EAAET,MAAM,CAAC;;MAGvC,IACE,CAACrD,KAAK,CAACqD,MAAM,CAAC,IAAIpD,QAAQ,CAACoD,MAAM,EAAE,IAAI,CAACjD,IAAI,CAAC,MAC5CJ,KAAK,CAAC6D,QAAQ,CAAC,IAAI5D,QAAQ,CAAC4D,QAAQ,EAAE,IAAI,CAACxD,MAAM,CAAC,CAAC,EACpD;QACA;;;EAGN,CAAC;EAEMS,QAAA,CAAAN,SAAA,CAAAwD,UAAU,GAAjB,UACEC,OAAe,EACfb,QAAiB,EACjBC,MAAgB,EAChBQ,QAAkB,EAClBK,QAAkB;IAElB,IAAId,QAAQ,EAAE;MACZ;MACA,IAAI,CAAC9C,MAAM,IACToC,IAAI,CAACC,KAAK,CACR,CAAC,KAAK,IAAI,IAAI,CAACvC,IAAI,GAAG,IAAI,GAAG,IAAI,CAACC,MAAM,GAAG,EAAE,GAAG,IAAI,CAACC,MAAM,CAAC,IAC1D2D,OAAO,CACV,GAAGA,OAAO;;IAGf,SAAS;MACP,IAAI,CAAC3D,MAAM,IAAI2D,OAAO;MAChB,IAAAX,EAAA,GAAqCvD,MAAM,CAAC,IAAI,CAACO,MAAM,EAAE,EAAE,CAAC;QAArD6D,SAAS,GAAAb,EAAA,CAAAE,GAAA;QAAOY,SAAS,GAAAd,EAAA,CAAAI,GAA4B;MAClE,IAAIS,SAAS,EAAE;QACb,IAAI,CAAC7D,MAAM,GAAG8D,SAAS;QACvB,IAAI,CAACT,UAAU,CAACQ,SAAS,EAAE,KAAK,EAAEd,MAAM,EAAEQ,QAAQ,CAAC;;MAGrD,IACE,CAAC7D,KAAK,CAACqD,MAAM,CAAC,IAAIpD,QAAQ,CAACoD,MAAM,EAAE,IAAI,CAACjD,IAAI,CAAC,MAC5CJ,KAAK,CAAC6D,QAAQ,CAAC,IAAI5D,QAAQ,CAAC4D,QAAQ,EAAE,IAAI,CAACxD,MAAM,CAAC,CAAC,KACnDL,KAAK,CAACkE,QAAQ,CAAC,IAAIjE,QAAQ,CAACiE,QAAQ,EAAE,IAAI,CAAC5D,MAAM,CAAC,CAAC,EACpD;QACA;;;EAGN,CAAC;EAEMQ,QAAA,CAAAN,SAAA,CAAAwC,MAAM,GAAb;IACE,IAAI,IAAI,CAAC7B,GAAG,IAAI,EAAE,EAAE;MAClB;;IAGF,IAAIkD,WAAW,GAAGnE,QAAQ,CAACoE,UAAU,CAAC,IAAI,CAACrD,IAAI,EAAE,IAAI,CAACC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACnE,IAAI,IAAI,CAACC,GAAG,IAAIkD,WAAW,EAAE;MAC3B;;IAGF,OAAO,IAAI,CAAClD,GAAG,GAAGkD,WAAW,EAAE;MAC7B,IAAI,CAAClD,GAAG,IAAIkD,WAAW;MACvB,EAAE,IAAI,CAACnD,KAAK;MACZ,IAAI,IAAI,CAACA,KAAK,KAAK,EAAE,EAAE;QACrB,IAAI,CAACA,KAAK,GAAG,CAAC;QACd,EAAE,IAAI,CAACD,IAAI;QACX,IAAI,IAAI,CAACA,IAAI,GAAGf,QAAQ,CAACqE,OAAO,EAAE;UAChC;;;MAIJF,WAAW,GAAGnE,QAAQ,CAACoE,UAAU,CAAC,IAAI,CAACrD,IAAI,EAAE,IAAI,CAACC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;;EAEnE,CAAC;EAEMJ,QAAA,CAAAN,SAAA,CAAAgE,GAAG,GAAV,UAAWC,OAAsB,EAAErB,QAAiB;IAC1C,IAAAsB,IAAI,GAAiDD,OAAO,CAAAC,IAAxD;MAAEC,QAAQ,GAAuCF,OAAO,CAAAE,QAA9C;MAAE5B,IAAI,GAAiC0B,OAAO,CAAA1B,IAAxC;MAAEM,MAAM,GAAyBoB,OAAO,CAAApB,MAAhC;MAAEQ,QAAQ,GAAeY,OAAO,CAAAZ,QAAtB;MAAEK,QAAQ,GAAKO,OAAO,CAAAP,QAAZ;IAExD,QAAQQ,IAAI;MACV,KAAK7E,SAAS,CAAC+E,MAAM;QACnB,OAAO,IAAI,CAACvC,QAAQ,CAACsC,QAAQ,CAAC;MAChC,KAAK9E,SAAS,CAACgF,OAAO;QACpB,OAAO,IAAI,CAACtC,SAAS,CAACoC,QAAQ,CAAC;MACjC,KAAK9E,SAAS,CAACiF,MAAM;QACnB,OAAO,IAAI,CAACjC,SAAS,CAAC8B,QAAQ,EAAE5B,IAAI,CAAC;MACvC,KAAKlD,SAAS,CAACkF,KAAK;QAClB,OAAO,IAAI,CAAC9B,QAAQ,CAAC0B,QAAQ,CAAC;MAChC,KAAK9E,SAAS,CAACmF,MAAM;QACnB,OAAO,IAAI,CAAC9B,QAAQ,CAACyB,QAAQ,EAAEvB,QAAQ,EAAEC,MAAM,CAAC;MAClD,KAAKxD,SAAS,CAACoF,QAAQ;QACrB,OAAO,IAAI,CAACtB,UAAU,CAACgB,QAAQ,EAAEvB,QAAQ,EAAEC,MAAM,EAAEQ,QAAQ,CAAC;MAC9D,KAAKhE,SAAS,CAACqF,QAAQ;QACrB,OAAO,IAAI,CAAClB,UAAU,CAACW,QAAQ,EAAEvB,QAAQ,EAAEC,MAAM,EAAEQ,QAAQ,EAAEK,QAAQ,CAAC;IAAA;EAE5E,CAAC;EACH,OAAApD,QAAC;AAAD,CAAC,CA7N6BX,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}