{"ast":null,"code":"import dateutil from './dateutil';\nvar DateWithZone = /** @class */function () {\n  function DateWithZone(date, tzid) {\n    if (isNaN(date.getTime())) {\n      throw new RangeError('Invalid date passed to DateWithZone');\n    }\n    this.date = date;\n    this.tzid = tzid;\n  }\n  Object.defineProperty(DateWithZone.prototype, \"isUTC\", {\n    get: function () {\n      return !this.tzid || this.tzid.toUpperCase() === 'UTC';\n    },\n    enumerable: false,\n    configurable: true\n  });\n  DateWithZone.prototype.toString = function () {\n    var datestr = dateutil.timeToUntilString(this.date.getTime(), this.isUTC);\n    if (!this.isUTC) {\n      return \";TZID=\".concat(this.tzid, \":\").concat(datestr);\n    }\n    return \":\".concat(datestr);\n  };\n  DateWithZone.prototype.getTime = function () {\n    return this.date.getTime();\n  };\n  DateWithZone.prototype.rezonedDate = function () {\n    var _a;\n    if (this.isUTC) {\n      return this.date;\n    }\n    var localTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n    var dateInLocalTZ = new Date(this.date.toLocaleString(undefined, {\n      timeZone: localTimeZone\n    }));\n    var dateInTargetTZ = new Date(this.date.toLocaleString(undefined, {\n      timeZone: (_a = this.tzid) !== null && _a !== void 0 ? _a : 'UTC'\n    }));\n    var tzOffset = dateInTargetTZ.getTime() - dateInLocalTZ.getTime();\n    return new Date(this.date.getTime() - tzOffset);\n  };\n  return DateWithZone;\n}();\nexport { DateWithZone };","map":{"version":3,"names":["dateutil","DateWithZone","date","tzid","isNaN","getTime","RangeError","Object","defineProperty","prototype","get","toUpperCase","toString","datestr","timeToUntilString","isUTC","concat","rezonedDate","localTimeZone","Intl","DateTimeFormat","resolvedOptions","timeZone","dateInLocalTZ","Date","toLocaleString","undefined","dateInTargetTZ","_a","tzOffset"],"sources":["../../src/datewithzone.ts"],"sourcesContent":[null],"mappings":"AAAA,OAAOA,QAAQ,MAAM,YAAY;AAEjC,IAAAC,YAAA;EAIE,SAAAA,aAAYC,IAAU,EAAEC,IAAoB;IAC1C,IAAIC,KAAK,CAACF,IAAI,CAACG,OAAO,EAAE,CAAC,EAAE;MACzB,MAAM,IAAIC,UAAU,CAAC,qCAAqC,CAAC;;IAE7D,IAAI,CAACJ,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACC,IAAI,GAAGA,IAAI;EAClB;EAEAI,MAAA,CAAAC,cAAA,CAAYP,YAAA,CAAAQ,SAAA,SAAK;SAAjB,SAAAC,CAAA;MACE,OAAO,CAAC,IAAI,CAACP,IAAI,IAAI,IAAI,CAACA,IAAI,CAACQ,WAAW,EAAE,KAAK,KAAK;IACxD,CAAC;;;;EAEMV,YAAA,CAAAQ,SAAA,CAAAG,QAAQ,GAAf;IACE,IAAMC,OAAO,GAAGb,QAAQ,CAACc,iBAAiB,CAAC,IAAI,CAACZ,IAAI,CAACG,OAAO,EAAE,EAAE,IAAI,CAACU,KAAK,CAAC;IAC3E,IAAI,CAAC,IAAI,CAACA,KAAK,EAAE;MACf,OAAO,SAAAC,MAAA,CAAS,IAAI,CAACb,IAAI,OAAAa,MAAA,CAAIH,OAAO,CAAE;;IAGxC,OAAO,IAAAG,MAAA,CAAIH,OAAO,CAAE;EACtB,CAAC;EAEMZ,YAAA,CAAAQ,SAAA,CAAAJ,OAAO,GAAd;IACE,OAAO,IAAI,CAACH,IAAI,CAACG,OAAO,EAAE;EAC5B,CAAC;EAEMJ,YAAA,CAAAQ,SAAA,CAAAQ,WAAW,GAAlB;;IACE,IAAI,IAAI,CAACF,KAAK,EAAE;MACd,OAAO,IAAI,CAACb,IAAI;;IAGlB,IAAMgB,aAAa,GAAGC,IAAI,CAACC,cAAc,EAAE,CAACC,eAAe,EAAE,CAACC,QAAQ;IACtE,IAAMC,aAAa,GAAG,IAAIC,IAAI,CAC5B,IAAI,CAACtB,IAAI,CAACuB,cAAc,CAACC,SAAS,EAAE;MAAEJ,QAAQ,EAAEJ;IAAa,CAAE,CAAC,CACjE;IACD,IAAMS,cAAc,GAAG,IAAIH,IAAI,CAC7B,IAAI,CAACtB,IAAI,CAACuB,cAAc,CAACC,SAAS,EAAE;MAAEJ,QAAQ,EAAE,CAAAM,EAAA,OAAI,CAACzB,IAAI,cAAAyB,EAAA,cAAAA,EAAA,GAAI;IAAK,CAAE,CAAC,CACtE;IACD,IAAMC,QAAQ,GAAGF,cAAc,CAACtB,OAAO,EAAE,GAAGkB,aAAa,CAAClB,OAAO,EAAE;IAEnE,OAAO,IAAImB,IAAI,CAAC,IAAI,CAACtB,IAAI,CAACG,OAAO,EAAE,GAAGwB,QAAQ,CAAC;EACjD,CAAC;EACH,OAAA5B,YAAC;AAAD,CAAC,EA7CD"},"metadata":{},"sourceType":"module","externalDependencies":[]}